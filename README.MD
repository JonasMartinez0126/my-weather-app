# ğŸŒ¤ï¸ My Weather App

![Node.js](https://img.shields.io/badge/Node.js-14.x-green) ![React](https://img.shields.io/badge/React-18.2-blue) ![TypeScript](https://img.shields.io/badge/TypeScript-5.1-blueviolet) ![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15.3-blue) ![OpenWeather](https://img.shields.io/badge/OpenWeather-API-orange)

AplicaciÃ³n web para consultar el clima de cualquier ciudad usando la **API de OpenWeather**, con historial de bÃºsquedas guardado en **PostgreSQL (Neon)**.
Frontend con **React + TypeScript**, backend con **Node.js + Express + TypeScript**.

---

<details>
<summary>ğŸ“‚ Estructura del proyecto</summary>

```
my-weather-app/
â”‚
â”œâ”€ backend/
â”‚  â”œâ”€ src/
â”‚  â”‚  â”œâ”€ db.ts                 # ConexiÃ³n a PostgreSQL y funciones para historial
â”‚  â”‚  â”œâ”€ index.ts              # Servidor principal
â”‚  â”‚  â””â”€ routes/
â”‚  â”‚     â”œâ”€ index.ts           # Centraliza todas las rutas
â”‚  â”‚     â”œâ”€ weatherRoutes.ts   # Rutas para obtener clima actual
â”‚  â”‚     â””â”€ historyRoutes.ts   # Rutas para historial
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ tsconfig.json
â”‚  â””â”€ .env                     # Variables de entorno
â”‚
â””â”€ frontend/
   â”œâ”€ src/
   â”‚  â”œâ”€ api/weatherApi.ts      # Funciones para consumir backend
   â”‚  â”œâ”€ components/
   â”‚  â”‚  â”œâ”€ WeatherCard.tsx     # Mostrar clima de una ciudad
   â”‚  â”‚  â””â”€ HistoryList.tsx     # Mostrar historial de bÃºsquedas
   â”‚  â”œâ”€ pages/Home.tsx         # PÃ¡gina principal
   â”‚  â”œâ”€ App.tsx
   â”‚  â””â”€ main.tsx
   â”œâ”€ package.json
   â””â”€ tsconfig.json
```

</details>

---

<details>
<summary>âš™ï¸ TecnologÃ­as utilizadas</summary>

* **Frontend:** React, TypeScript, Axios, Tailwind CSS (opcional)
* **Backend:** Node.js, Express, TypeScript, Axios
* **Base de datos:** PostgreSQL (Neon)
* **API externa:** OpenWeather

</details>

---

<details>
<summary>ğŸ“ Funcionalidades</summary>

1. Consultar el clima actual de cualquier ciudad.
2. Guardar automÃ¡ticamente la bÃºsqueda en la base de datos.
3. Mostrar un historial de las Ãºltimas bÃºsquedas (mÃ¡x. 10).
4. Manejo de errores: ciudad no encontrada, API no disponible.

</details>

---

<details>
<summary>ğŸš€ InstalaciÃ³n y ejecuciÃ³n</summary>

### Backend

```bash
cd backend
npm install
```

Crear `.env`:

```
OPENWEATHER_API_KEY=tu_api_key_aqui
DATABASE_URL=postgresql://usuario:contraseÃ±a@neon_url/db_name
```

Crear tabla en Neon:

```sql
CREATE TABLE IF NOT EXISTS weather_history (
  id SERIAL PRIMARY KEY,
  ciudad VARCHAR(100),
  temperatura DECIMAL(5,2),
  clima VARCHAR(100),
  fecha TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

Ejecutar backend:

```bash
npm run dev
```

Servidor corriendo en `http://localhost:4000/api`.

---

### Frontend

```bash
cd frontend
npm install
npm run dev
```

App disponible en `http://localhost:5173`.

</details>

---

<details>
<summary>ğŸ“Œ Uso</summary>

1. Abrir la app en el navegador.
2. Ingresar el nombre de una ciudad y hacer clic en **Buscar**.
3. Se mostrarÃ¡ el clima actual en un card.
4. Debajo aparecerÃ¡ el historial de bÃºsquedas realizadas.

</details>

---

<details>
<summary>ğŸ”§ Rutas del backend</summary>

| Ruta                 | MÃ©todo | DescripciÃ³n                                |
| -------------------- | ------ | ------------------------------------------ |
| `/api/weather/:city` | GET    | Obtener clima actual de la ciudad          |
| `/api/history`       | GET    | Obtener historial de las Ãºltimas bÃºsquedas |

</details>

---

<details>
<summary>ğŸŒ Flujo de datos</summary>

```text
[Frontend Home.tsx]
       |
       | Axios GET /weather/:city
       v
[Backend weatherRoutes.ts] --> Consulta OpenWeather API
       |                           |
       | Axios GET                v
       |                       OpenWeather
       v
 Guarda en PostgreSQL           Response JSON
       |
       v
 Devuelve datos al Frontend
       |
       v
 [WeatherCard] muestra clima
 [HistoryList] muestra historial (GET /history)
```

</details>

---

<details>
<summary>âš ï¸ Notas importantes</summary>

* Asegurarse de que la **API Key de OpenWeather** sea vÃ¡lida.
* Los nombres de ciudad deben estar correctamente escritos.
* Backend maneja automÃ¡ticamente espacios en nombres de ciudad.
* Para mÃºltiples paÃ­ses, se puede agregar cÃ³digo ISO al nombre: `"Asuncion,PY"`.

</details>

---

<details>
<summary>ğŸ—ï¸ Mejoras futuras</summary>

* Autocompletar ciudades en el frontend.
* Mostrar Ã­conos segÃºn el clima.
* Filtrado y paginaciÃ³n del historial.
* Multi-idioma y soporte para distintas unidades de temperatura.

</details>
